<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vladimir Impresiones</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React y ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .animate-pulse-slow { animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICONOS ---
        const IconPrinter = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2-2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>;
        const IconTruck = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle></svg>;
        const IconSparkles = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L12 3Z"></path></svg>;
        const IconWhatsapp = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>;
        const IconX = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>;
        const IconCard = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line></svg>;
        const IconSend = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>;

        const VladimirPrintingApp = () => {
            const [isChatOpen, setIsChatOpen] = useState(false);
            const [messages, setMessages] = useState([
                { role: 'model', text: '¬°Hola! üëã Bienvenido a Vladimir Impresiones. Dime qu√© necesitas imprimir y te doy el precio exacto al instante.' }
            ]);
            const [userInput, setUserInput] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const messagesEndRef = useRef(null);
            const geminiApiKey = "AIzaSyA9LArVr7YHJ1guTyPHm5yV24Bumui9GLU"; 

            const scrollToBottom = () => {
                messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
            };

            useEffect(() => {
                scrollToBottom();
            }, [messages, isChatOpen]);

            const handleSendMessage = async () => {
                if (!userInput.trim()) return;
                const newMessages = [...messages, { role: 'user', text: userInput }];
                setMessages(newMessages);
                setUserInput('');
                setIsLoading(true);

                try {
                    const systemInstruction = `
                        Eres una calculadora de precios para "Vladimir Impresiones".
                        REGLAS: NO SALUDES. Ve directo al precio. PRIORIDAD: Blanco y Negro. 
                        CIERRE: "Recuerda que te lo llevamos GRATIS a donde est√©s."
                        PRECIOS:
                        - Copia C√©dula: B/N RD$5 c/u, Color RD$10 c/u.
                        - Docs B/N: 1-5 ($10), 6-10 ($8), 11-50 ($5), +50 ($4).
                        - Docs Color: Simple ($15, >50 $10), Full ($25).
                        - Doble cara: B/N (+$3), Color ($20/$40).
                    `;

                    // Usamos 'gemini-1.5-flash' normal para m√°xima compatibilidad
                    const response = await fetch(
                        `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${geminiApiKey}`,
                        {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({
                                contents: [{ parts: [{ text: userInput }] }],
                                systemInstruction: { parts: [{ text: systemInstruction }] },
                            }),
                        }
                    );
                    
                    const data = await response.json();
                    
                    let botResponse = "Hubo un error calculando.";
                    if(data.error) {
                        console.error("API Error:", data.error);
                        // Mensaje claro si la llave falla
                        botResponse = `‚ö†Ô∏è Error con la llave: ${data.error.message}.`;
                    } else {
                        botResponse = data.candidates?.[0]?.content?.parts?.[0]?.text || "No entend√≠, ¬øpodr√≠as repetir?";
                    }
                    
                    setMessages([...newMessages, { role: 'model', text: botResponse }]);

                } catch (error) {
                    console.error("Fetch Error:", error);
                    setMessages([...newMessages, { role: 'model', text: "Error de conexi√≥n de red." }]);
                } finally {
                    setIsLoading(false);
                }
            };

            return (
                <div className="min-h-screen bg-gray-50 pb-24 md:pb-0 font-sans">
                    {/* NAVBAR */}
                    <nav className="bg-white shadow-sm sticky top-0 z-40 border-b border-gray-100">
                        <div className="max-w-5xl mx-auto px-4 py-3 flex justify-between items-center">
                            <div className="flex items-center gap-2">
                                <div className="bg-indigo-600 text-white p-2 rounded-lg"><IconPrinter /></div>
                                <div>
                                    <h1 className="text-xl font-bold text-gray-900 leading-none">Vladimir<span className="text-indigo-600">Impresiones</span></h1>
                                    <span className="text-xs text-gray-500 font-medium">CALIDAD & RAPIDEZ</span>
                                </div>
                            </div>
                            <div className="hidden md:flex items-center gap-4 text-sm font-medium text-gray-600">
                                <a href="https://wa.me/18497105798" className="flex items-center gap-1 hover:text-indigo-600"><IconWhatsapp /> 849-710-5798</a>
                            </div>
                        </div>
                    </nav>

                    {/* HERO */}
                    <div className="max-w-5xl mx-auto p-4 md:p-8">
                        <div className="bg-indigo-900 rounded-3xl p-8 md:p-12 text-white mb-8 relative overflow-hidden shadow-2xl">
                            <div className="relative z-10">
                                <div className="inline-flex items-center gap-2 bg-green-500 text-white px-3 py-1 rounded-full text-xs font-bold mb-4 animate-pulse-slow">
                                    <IconTruck /> ¬°ENV√çO GRATIS A DONDE EST√âS!
                                </div>
                                <h2 className="text-3xl md:text-5xl font-extrabold mb-4">Tu centro de impresi√≥n <br/><span className="text-indigo-300">favorito en el campus.</span></h2>
                                <p className="text-indigo-100 text-lg mb-6 max-w-lg">Env√≠a tus archivos por WhatsApp y te los llevamos a donde te encuentres dentro del campus.</p>
                                <div className="flex flex-wrap gap-3">
                                    <button onClick={() => setIsChatOpen(true)} className="bg-white text-indigo-900 px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg hover:bg-indigo-50 transition-transform hover:scale-105">
                                        <span className="text-yellow-500"><IconSparkles /></span> Cotizar Ahora
                                    </button>
                                    <a href="https://wa.me/18497105798" className="bg-indigo-800 text-white border border-indigo-600 px-6 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-colors">
                                        <IconWhatsapp /> Enviar al 849-710-5798
                                    </a>
                                </div>
                            </div>
                            
                            {/* Badge Promocional */}
                            <div className="absolute top-10 right-10 hidden md:block bg-white/10 backdrop-blur-lg p-6 rounded-2xl border border-white/20 transform rotate-2">
                               <div className="text-center">
                                  <span className="block text-4xl font-bold text-yellow-400">RD$4 <span className="text-lg text-white">c/u</span></span>
                                  <span className="text-sm text-indigo-100 uppercase tracking-wider font-bold">Mayorista (+50)</span>
                                  <div className="mt-2 text-xs bg-indigo-800 px-2 py-1 rounded">Blanco y Negro</div>
                               </div>
                            </div>
                        </div>

                        {/* PRECIOS GRID */}
                        <div className="grid md:grid-cols-3 gap-6 mb-8 mt-8">
                            {/* B/N */}
                            <div className="bg-white p-6 rounded-2xl shadow-md border-2 border-indigo-100 relative group hover:border-indigo-300 transition-colors">
                                <div className="absolute top-0 left-0 w-full h-1.5 bg-indigo-600 rounded-t-2xl"></div>
                                <div className="flex justify-between mb-4">
                                    <div className="w-12 h-12 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-700 group-hover:scale-110 transition-transform"><IconPrinter /></div>
                                    <span className="bg-indigo-100 text-indigo-800 text-xs font-bold px-2 py-1 rounded-full h-fit">TOP</span>
                                </div>
                                <h3 className="text-xl font-bold text-gray-900 mb-2">Blanco y Negro</h3>
                                <div className="space-y-3 bg-gray-50 p-3 rounded-xl text-sm">
                                    <div className="flex justify-between border-b pb-2"><span>1-5 hojas</span><span className="font-bold">RD$10 c/u</span></div>
                                    <div className="flex justify-between border-b pb-2"><span>6-10 hojas</span><span className="font-bold">RD$8 c/u</span></div>
                                    <div className="flex justify-between border-b pb-2"><span>11-50 hojas</span><span className="font-bold">RD$5 c/u</span></div>
                                    <div className="flex justify-between bg-indigo-600 text-white p-2 rounded"><span>+50 hojas</span><span className="font-bold">RD$4 c/u</span></div>
                                </div>
                            </div>
                            
                            {/* Color Simple */}
                            <div className="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:border-cyan-200 transition-colors group">
                                <div className="w-12 h-12 bg-cyan-50 rounded-full flex items-center justify-center mb-4 text-cyan-600 group-hover:scale-110 transition-transform"><IconSparkles /></div>
                                <h3 className="text-xl font-bold text-gray-900 mb-2">Color Simple</h3>
                                <div className="space-y-2">
                                    <div className="flex justify-between text-sm p-2 bg-cyan-50 rounded-lg"><span>Normal</span><span className="font-bold text-cyan-800">RD$15 c/u</span></div>
                                    <div className="text-xs text-center text-gray-500">M√°s de 50 hojas: <span className="font-bold">RD$10 c/u</span></div>
                                </div>
                            </div>

                            {/* Full Color */}
                            <div className="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:border-pink-200 transition-colors group">
                                <div className="w-12 h-12 bg-pink-50 rounded-full flex items-center justify-center mb-4 text-pink-600 group-hover:scale-110 transition-transform"><IconPrinter /></div>
                                <h3 className="text-xl font-bold text-gray-900 mb-2">Full Color</h3>
                                <div className="flex justify-between text-sm p-2 bg-pink-50 rounded-lg"><span>Alta Calidad</span><span className="font-bold text-pink-800">RD$25 c/u</span></div>
                            </div>
                        </div>

                        {/* SECCI√ìN C√âDULAS Y OTROS */}
                        <div className="grid md:grid-cols-2 gap-6 mb-8">
                            {/* C√©dulas */}
                            <div className="bg-gray-800 text-white rounded-2xl p-5 flex items-center justify-between shadow-lg transform hover:-translate-y-1 transition-transform">
                                <div className="flex items-center gap-4">
                                  <div className="bg-white/10 p-3 rounded-full"><IconCard /></div>
                                  <div>
                                    <h4 className="font-bold text-lg">Copia de C√©dula</h4>
                                    <p className="text-gray-300 text-xs">O documentos ID peque√±os</p>
                                  </div>
                                </div>
                                <div className="text-right">
                                   <div className="text-sm"><span className="text-gray-400">B/N:</span> <span className="font-bold text-lg">RD$5 c/u</span></div>
                                   <div className="text-sm"><span className="text-gray-400">Color:</span> <span className="font-bold text-lg">RD$10 c/u</span></div>
                                </div>
                            </div>

                            {/* Doble Cara Info */}
                            <div className="bg-white border border-gray-200 rounded-2xl p-5 flex flex-col justify-center shadow-sm hover:shadow-md transition-shadow">
                                <h4 className="font-bold text-gray-900 mb-1">Impresi√≥n Doble Cara</h4>
                                <p className="text-sm text-gray-600">Se cobra <span className="font-bold">+RD$3</span> extra por hoja en B/N.</p>
                            </div>
                        </div>

                    </div>

                    {/* BOTON FLOTANTE */}
                    <button onClick={() => setIsChatOpen(!isChatOpen)} className="fixed bottom-6 right-6 bg-indigo-600 text-white p-4 rounded-full shadow-2xl z-50 flex items-center gap-2 border-4 border-indigo-100 hover:scale-105 transition-transform">
                        {isChatOpen ? <IconX /> : <IconSparkles />}
                        <span className="font-bold hidden md:inline">{isChatOpen ? 'Cerrar' : 'Cotizar'}</span>
                    </button>

                    {/* CHAT */}
                    {isChatOpen && (
                        <div className="fixed bottom-24 right-6 w-[90vw] md:w-96 h-[400px] bg-white rounded-2xl shadow-2xl z-50 flex flex-col border border-gray-200 overflow-hidden animate-pulse-slow">
                            <div className="bg-indigo-600 p-4 text-white flex items-center gap-2">
                                <IconSparkles /> <span className="font-bold text-sm">Asistente Virtual</span>
                            </div>
                            <div className="flex-1 p-4 overflow-y-auto bg-gray-50 space-y-4">
                                {messages.map((msg, idx) => (
                                    <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                                        <div className={`max-w-[85%] p-3 rounded-2xl text-sm ${msg.role === 'user' ? 'bg-indigo-600 text-white rounded-br-none' : 'bg-white text-gray-800 border shadow-sm rounded-bl-none'}`}>
                                            {msg.text}
                                        </div>
                                    </div>
                                ))}
                                {isLoading && <div className="text-xs text-gray-500 p-2">Escribiendo...</div>}
                                <div ref={messagesEndRef} />
                            </div>
                            <div className="p-3 bg-white border-t flex gap-2">
                                <input type="text" value={userInput} onChange={(e) => setUserInput(e.target.value)} onKeyDown={(e) => e.key === 'Enter' && handleSendMessage()} placeholder="Ej: 60 hojas..." className="flex-1 bg-gray-100 rounded-xl px-4 py-2 text-sm outline-none focus:ring-2 focus:ring-indigo-500"/>
                                <button onClick={handleSendMessage} className="bg-indigo-600 text-white p-2 rounded-xl"><IconSend /></button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<VladimirPrintingApp />);
    </script>
</body>
</html>


